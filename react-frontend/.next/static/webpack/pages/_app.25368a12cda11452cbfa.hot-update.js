self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./context/AuthContext.js":
/*!********************************!*\
  !*** ./context/AuthContext.js ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "callAPI": function() { return /* binding */ callAPI; },
/* harmony export */   "AuthProvider": function() { return /* binding */ AuthProvider; }
/* harmony export */ });
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var phoenix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! phoenix */ "./node_modules/phoenix/priv/static/phoenix.js");
/* harmony import */ var phoenix__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(phoenix__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/router */ "./node_modules/next/router.js");
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/utils */ "./utils/utils.js");
/* module decorator */ module = __webpack_require__.hmd(module);




var _jsxFileName = "/home/aidan/nusclubhouse/react-frontend/context/AuthContext.js",
    _this = undefined,
    _s = $RefreshSig$();





var AuthContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)();
var callAPI = /*#__PURE__*/function () {
  var _ref = (0,_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.default)( /*#__PURE__*/_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(path, method, body) {
    var response, data;
    return _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            console.log('fetching...');
            _context.next = 3;
            return fetch("".concat(_utils_utils__WEBPACK_IMPORTED_MODULE_6__.API_URL).concat(path), {
              method: method,
              headers: {
                "content-type": "application/json"
              },
              credentials: "include",
              body: JSON.stringify(body)
            });

          case 3:
            response = _context.sent;
            _context.next = 6;
            return response.json();

          case 6:
            data = _context.sent;
            return _context.abrupt("return", data);

          case 8:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function callAPI(_x, _x2, _x3) {
    return _ref.apply(this, arguments);
  };
}();
var AuthProvider = function AuthProvider(props) {
  _s();

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(''),
      user = _useState[0],
      setUser = _useState[1];

  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({}),
      roomData = _useState2[0],
      setRoomData = _useState2[1];

  var router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();

  var successToast = function successToast(text) {
    var subtext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
    var toast = arguments.length > 2 ? arguments[2] : undefined;
    return toast({
      title: text,
      description: subtext,
      status: 'success',
      duration: 3000,
      isClosable: true
    });
  };

  var errorToast = function errorToast(text) {
    var subtext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
    var toast = arguments.length > 2 ? arguments[2] : undefined;
    return toast({
      title: text,
      description: subtext,
      status: 'error',
      duration: 3000,
      isClosable: true
    });
  };

  var fetchRoom = /*#__PURE__*/function () {
    var _ref2 = (0,_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.default)( /*#__PURE__*/_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(roomId) {
      var socket, channel;
      return _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              // const room = await joinRoom(roomId)
              console.log('joinin room channel...');
              socket = new phoenix__WEBPACK_IMPORTED_MODULE_4__.Socket(_utils_utils__WEBPACK_IMPORTED_MODULE_6__.SOCKET_URL);
              socket.connect();
              console.log(socket);
              channel = socket.channel("room:".concat(roomId));
              console.log(channel);
              channel.join().receive('ok', function (_ref3) {
                var id = _ref3.id,
                    room = _ref3.room,
                    pid = _ref3.pid;
                console.log('room id: ', id);
                console.log('room data: ', room);
                setRoomData(room);
                console.log('room pid: ', pid);
              }).receive('error', function (reason) {
                console.error(reason);
              });
              console.log(channel);
              channel.on('msg', function (_ref4) {
                var msg = _ref4.msg;
                console.log('msg', msg);
              });
              channel.on('room_update', function (_ref5) {
                var new_user = _ref5.new_user;
                console.log('room_update, new user: ', new_user);
              });
              return _context2.abrupt("return", function () {
                channel.leave();
                socket.disconnect();
              });

            case 11:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function fetchRoom(_x4) {
      return _ref2.apply(this, arguments);
    };
  }();

  var registerUser = /*#__PURE__*/function () {
    var _ref6 = (0,_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.default)( /*#__PURE__*/_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(values, toast, actions) {
      var body, data;
      return _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              actions.setSubmitting(true);
              body = {
                credentials: {
                  username: values.signup_username,
                  email: values.signup_email,
                  password: values.signup_password
                }
              };
              _context3.next = 5;
              return callAPI('/auth/register', 'POST', body);

            case 5:
              data = _context3.sent;

              if (!data.data) {
                console.log("Registration failed. Please try again. ", data);
                errorToast("Failed to register", "", toast);
              } else {
                successToast("Successfully registerd account", "Check your NUS email & confirm your account before logging in!", toast);
                setUser(data.data);
              }

              actions.setSubmitting(false);
              _context3.next = 13;
              break;

            case 10:
              _context3.prev = 10;
              _context3.t0 = _context3["catch"](0);
              console.error(_context3.t0);

            case 13:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 10]]);
    }));

    return function registerUser(_x5, _x6, _x7) {
      return _ref6.apply(this, arguments);
    };
  }();
  /**
   * Login user via 3rd party provider
   * @param {any} token obtained by provider to make authorized requests to get user info from provider (username, email, etc)
   */


  var loginUser = /*#__PURE__*/function () {
    var _ref7 = (0,_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.default)( /*#__PURE__*/_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee4(values, toast, actions) {
      var body, data, username;
      return _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              actions.setSubmitting(true);
              body = {
                credentials: values
              };
              _context4.next = 5;
              return callAPI('/auth/login', 'POST', body);

            case 5:
              data = _context4.sent;

              if (data.data) {
                username = data.data.username;
                console.log('Successfully logged in ', username);
                successToast("Successfully logged in", "", toast);
                setUser(data.data);
              } else {
                console.log("Login failed. Please try again.", data);
                errorToast("Failed to log in", "Check your email (if you havent confirmed your account) or contact admin!", toast);
              }

              actions.setSubmitting(false);
              _context4.next = 13;
              break;

            case 10:
              _context4.prev = 10;
              _context4.t0 = _context4["catch"](0);
              console.error(_context4.t0);

            case 13:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[0, 10]]);
    }));

    return function loginUser(_x8, _x9, _x10) {
      return _ref7.apply(this, arguments);
    };
  }();
  /**
   * Logs user out by setting user to null
   */


  var logoutUser = /*#__PURE__*/function () {
    var _ref8 = (0,_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.default)( /*#__PURE__*/_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee5() {
      return _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5);
    }));

    return function logoutUser() {
      return _ref8.apply(this, arguments);
    };
  }();

  var checkUserLoggedIn = /*#__PURE__*/function () {
    var _ref9 = (0,_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.default)( /*#__PURE__*/_home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee6() {
      var data;
      return _home_aidan_nusclubhouse_react_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee6$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              console.log('checking if user logged in.....');
              _context6.next = 3;
              return callAPI('/auth/me', 'GET');

            case 3:
              data = _context6.sent;

              if (data.data) {
                console.log('user logged in: ', data.data);
                setUser(data.data);
              } else {
                setUser(null);
              }

            case 5:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee6);
    }));

    return function checkUserLoggedIn() {
      return _ref9.apply(this, arguments);
    };
  }();

  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function () {
    checkUserLoggedIn();
  }, []);
  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {
    value: {
      user: user,
      roomData: roomData,
      registerUser: registerUser,
      loginUser: loginUser,
      logoutUser: logoutUser,
      fetchRoom: fetchRoom
    },
    children: props.children
  }, void 0, false, {
    fileName: _jsxFileName,
    lineNumber: 161,
    columnNumber: 9
  }, _this);
};

_s(AuthProvider, "wM45dXokQ16ARnkYpIbKG6wwhAw=", false, function () {
  return [next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter];
});

_c = AuthProvider;
/* harmony default export */ __webpack_exports__["default"] = (AuthContext);

var _c;

$RefreshReg$(_c, "AuthProvider");

;
    var _a, _b;
    // Legacy CSS implementations will `eval` browser code in a Node.js context
    // to extract CSS. For backwards compatibility, we need to check we're in a
    // browser context before continuing.
    if (typeof self !== 'undefined' &&
        // AMP / No-JS mode does not inject these helpers:
        '$RefreshHelpers$' in self) {
        var currentExports = module.__proto__.exports;
        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;
        // This cannot happen in MainTemplate because the exports mismatch between
        // templating and execution.
        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);
        // A module can be accepted automatically based on its exports, e.g. when
        // it is a Refresh Boundary.
        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {
            // Save the previous exports on update so we can compare the boundary
            // signatures.
            module.hot.dispose(function (data) {
                data.prevExports = currentExports;
            });
            // Unconditionally accept an update to this module, we'll check if it's
            // still a Refresh Boundary later.
            module.hot.accept();
            // This field is set when the previous version of this module was a
            // Refresh Boundary, letting us know we need to check for invalidation or
            // enqueue an update.
            if (prevExports !== null) {
                // A boundary can become ineligible if its exports are incompatible
                // with the previous exports.
                //
                // For example, if you add/remove/change exports, we'll want to
                // re-execute the importing modules, and force those components to
                // re-render. Similarly, if you convert a class component to a
                // function, we want to invalidate the boundary.
                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {
                    module.hot.invalidate();
                }
                else {
                    self.$RefreshHelpers$.scheduleUpdate();
                }
            }
        }
        else {
            // Since we just executed the code for the module, it's possible that the
            // new exports made it ineligible for being a boundary.
            // We only care about the case when we were _previously_ a boundary,
            // because we already accepted this update (accidental side effect).
            var isNoLongerABoundary = prevExports !== null;
            if (isNoLongerABoundary) {
                module.hot.invalidate();
            }
        }
    }


/***/ }),

/***/ "./node_modules/phoenix/priv/static/phoenix.js":
/*!*****************************************************!*\
  !*** ./node_modules/phoenix/priv/static/phoenix.js ***!
  \*****************************************************/
/***/ (function(module) {

!function(e,t){ true?module.exports=t():0}(this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}n.r(t),n.d(t,"Channel",(function(){return _})),n.d(t,"Serializer",(function(){return H})),n.d(t,"Socket",(function(){return U})),n.d(t,"LongPoll",(function(){return D})),n.d(t,"Ajax",(function(){return M})),n.d(t,"Presence",(function(){return N}));var l="undefined"!=typeof self?self:null,f="undefined"!=typeof window?window:null,d=l||f||void 0,p=0,v=1,y=2,m=3,g="closed",k="errored",b="joined",j="joining",C="leaving",E="phx_close",R="phx_error",T="phx_join",S="phx_reply",w="phx_leave",A=[E,R,T,S,w],L="longpoll",x="websocket",O=function(e){if("function"==typeof e)return e;return function(){return e}},P=function(){function e(t,n,i,o){c(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return h(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref;this.recHooks.filter((function(e){return e.status===t})).forEach((function(e){return e.callback(n)}))}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)})),this.timeoutTimer=setTimeout((function(){e.trigger("timeout",{})}),this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),_=function(){function e(t,n,i){var o=this;c(this,e),this.state=g,this.topic=t,this.params=O(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new P(this,T,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new J((function(){o.socket.isConnected()&&o.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((function(){return o.rejoinTimer.reset()}))),this.stateChangeRefs.push(this.socket.onOpen((function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}))),this.joinPush.receive("ok",(function(){o.state=b,o.rejoinTimer.reset(),o.pushBuffer.forEach((function(e){return e.send()})),o.pushBuffer=[]})),this.joinPush.receive("error",(function(){o.state=k,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.onClose((function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log("channel","close ".concat(o.topic," ").concat(o.joinRef())),o.state=g,o.socket.remove(o)})),this.onError((function(e){o.socket.hasLogger()&&o.socket.log("channel","error ".concat(o.topic),e),o.isJoining()&&o.joinPush.reset(),o.state=k,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.joinPush.receive("timeout",(function(){o.socket.hasLogger()&&o.socket.log("channel","timeout ".concat(o.topic," (").concat(o.joinRef(),")"),o.joinPush.timeout),new P(o,w,O({}),o.timeout).send(),o.state=k,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.on(S,(function(e,t){o.trigger(o.replyEventName(t),e)}))}return h(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(E,e)}},{key:"onError",value:function(e){return this.on(R,(function(t){return e(t)}))}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter((function(n){return!(n.event===e&&(void 0===t||t===n.ref))}))}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw new Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new P(this,e,(function(){return t}),n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=C;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(E,"leave")},i=new P(this,w,O({}),t);return i.receive("ok",(function(){return n()})).receive("timeout",(function(){return n()})),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return A.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=j,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var o=this.onMessage(e,t,n,i);if(t&&!o)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var r=this.bindings.filter((function(t){return t.event===e})),s=0;s<r.length;s++){r[s].callback(o,n,i||this.joinRef())}}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===g}},{key:"isErrored",value:function(){return this.state===k}},{key:"isJoined",value:function(){return this.state===b}},{key:"isJoining",value:function(){return this.state===j}},{key:"isLeaving",value:function(){return this.state===C}}]),e}(),H={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));var n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,o=e.topic,r=e.payload,s=this.META_LENGTH+t.length+n.length+o.length+i.length,a=new ArrayBuffer(this.HEADER_LENGTH+s),c=new DataView(a),u=0;c.setUint8(u++,this.KINDS.push),c.setUint8(u++,t.length),c.setUint8(u++,n.length),c.setUint8(u++,o.length),c.setUint8(u++,i.length),Array.from(t,(function(e){return c.setUint8(u++,e.charCodeAt(0))})),Array.from(n,(function(e){return c.setUint8(u++,e.charCodeAt(0))})),Array.from(o,(function(e){return c.setUint8(u++,e.charCodeAt(0))})),Array.from(i,(function(e){return c.setUint8(u++,e.charCodeAt(0))}));var h=new Uint8Array(a.byteLength+r.byteLength);return h.set(new Uint8Array(a),0),h.set(new Uint8Array(r),a.byteLength),h.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),o=t.getUint8(2),r=t.getUint8(3),s=this.HEADER_LENGTH+this.META_LENGTH-1,a=n.decode(e.slice(s,s+i));s+=i;var c=n.decode(e.slice(s,s+o));s+=o;var u=n.decode(e.slice(s,s+r));return s+=r,{join_ref:a,ref:null,topic:c,event:u,payload:e.slice(s,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),o=t.getUint8(2),r=t.getUint8(3),s=t.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,c=n.decode(e.slice(a,a+i));a+=i;var u=n.decode(e.slice(a,a+o));a+=o;var h=n.decode(e.slice(a,a+r));a+=r;var l=n.decode(e.slice(a,a+s));a+=s;var f=e.slice(a,e.byteLength);return{join_ref:c,ref:u,topic:h,event:S,payload:{status:l,response:f}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),o=t.getUint8(2),r=this.HEADER_LENGTH+2,s=n.decode(e.slice(r,r+i));r+=i;var a=n.decode(e.slice(r,r+o));return r+=o,{join_ref:null,ref:null,topic:s,event:a,payload:e.slice(r,e.byteLength)}}},U=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||d.WebSocket||D,this.defaultEncoder=H.encode.bind(H),this.defaultDecoder=H.decode.bind(H),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==D?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),f&&f.addEventListener&&f.addEventListener("beforeunload",(function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))})),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=O(i.params||{}),this.endPoint="".concat(t,"/").concat(x),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new J((function(){n.teardown((function(){return n.connect()}))}),this.reconnectAfterMs)}return h(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=M.appendParams(M.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=O(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((function(e){return(0,r(e,2)[1])()}))}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return e.sendHeartbeat()}),this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone((function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed((function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()}))}))}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout((function(){t.waitForBufferDone(e,n+1)}),150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.readyState!==m?setTimeout((function(){t.waitForSocketClosed(e,n+1)}),150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(t){return(0,r(t,2)[1])(e)}))}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach((function(t){return(0,r(t,2)[1])(e)}))}},{key:"triggerChanError",value:function(){this.channels.forEach((function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(R)}))}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case p:return"connecting";case v:return"open";case y:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter((function(t){return t.joinRef()!==e.joinRef()}))}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter((function(t){var n=r(t,1)[0];return-1===e.indexOf(n)}))}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new _(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,o=e.payload,r=e.ref,s=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(s,", ").concat(r,")"),o)}this.isConnected()?this.encode(e,(function(e){return t.conn.send(e)})):this.sendBuffer.push((function(){return t.encode(e,(function(e){return t.conn.send(e)}))}))}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,this.conn.readyState===v&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(e){return e()})),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,(function(e){var n=e.topic,i=e.event,o=e.payload,s=e.ref,a=e.join_ref;s&&s===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(o.status||""," ").concat(n," ").concat(i," ").concat(s&&"("+s+")"||""),o);for(var c=0;c<t.channels.length;c++){var u=t.channels[c];u.isMember(n,i,o,a)&&u.trigger(i,o,s,a)}for(var h=0;h<t.stateChangeCallbacks.message.length;h++){(0,r(t.stateChangeCallbacks.message[h],2)[1])(e)}}))}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find((function(t){return t.topic===e&&(t.isJoined()||t.isJoining())}));t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),D=function(){function e(t){c(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=p,this.poll()}return h(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+x),"$1/"+L)}},{key:"endpointURL",value:function(){return M.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=p}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;this.readyState!==v&&this.readyState!==p||M.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),(function(t){if(t){var n=t.status,i=t.token,o=t.messages;e.token=i}else n=0;switch(n){case 200:o.forEach((function(t){return e.onmessage({data:t})})),e.poll();break;case 204:e.poll();break;case 410:e.readyState=v,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(n))}}))}},{key:"send",value:function(e){var t=this;M.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),(function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())}))}},{key:"close",value:function(e,t){this.readyState=m,this.onclose()}}]),e}(),M=function(){function e(){c(this,e)}return h(e,null,[{key:"request",value:function(e,t,n,i,o,r,s){if(d.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,e,t,i,o,r,s)}else{var c=new d.XMLHttpRequest;this.xhrRequest(c,e,t,n,i,o,r,s)}}},{key:"xdomainRequest",value:function(e,t,n,i,o,r,s){var a=this;e.timeout=o,e.open(t,n),e.onload=function(){var t=a.parseJSON(e.responseText);s&&s(t)},r&&(e.ontimeout=r),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,o,r,s,a){var c=this;e.open(t,n,!0),e.timeout=r,e.setRequestHeader("Content-Type",i),e.onerror=function(){a&&a(null)},e.onreadystatechange=function(){if(e.readyState===c.states.complete&&a){var t=c.parseJSON(e.responseText);a(t)}},s&&(e.ontimeout=s),e.send(o)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=t?"".concat(t,"[").concat(i,"]"):i,s=e[i];"object"===o(s)?n.push(this.serialize(s,r)):n.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();M.states={complete:4};var N=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e);var o=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(o.state,(function(t){var i=n.caller,o=i.onJoin,r=i.onLeave,s=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,o,r),n.pendingDiffs.forEach((function(t){n.state=e.syncDiff(n.state,t,o,r)})),n.pendingDiffs=[],s()})),this.channel.on(o.diff,(function(t){var i=n.caller,o=i.onJoin,r=i.onLeave,s=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,o,r),s())}))}return h(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var o=this,r=this.clone(e),s={},a={};return this.map(r,(function(e,n){t[e]||(a[e]=n)})),this.map(t,(function(e,t){var n=r[e];if(n){var i=t.metas.map((function(e){return e.phx_ref})),c=n.metas.map((function(e){return e.phx_ref})),u=t.metas.filter((function(e){return c.indexOf(e.phx_ref)<0})),h=n.metas.filter((function(e){return i.indexOf(e.phx_ref)<0}));u.length>0&&(s[e]=t,s[e].metas=u),h.length>0&&(a[e]=o.clone(n),a[e].metas=h)}else s[e]=t})),this.syncDiff(r,{joins:s,leaves:a},n,i)}},{key:"syncDiff",value:function(e,t,n,o){var r=t.joins,s=t.leaves,a=this.clone(e);return n||(n=function(){}),o||(o=function(){}),this.map(r,(function(e,t){var o=a[e];if(a[e]=t,o){var r,s=a[e].metas.map((function(e){return e.phx_ref})),c=o.metas.filter((function(e){return s.indexOf(e.phx_ref)<0}));(r=a[e].metas).unshift.apply(r,i(c))}n(e,o,t)})),this.map(s,(function(e,t){var n=a[e];if(n){var i=t.metas.map((function(e){return e.phx_ref}));n.metas=n.metas.filter((function(e){return i.indexOf(e.phx_ref)<0})),o(e,n,t),0===n.metas.length&&delete a[e]}})),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,(function(e,n){return t(e,n)}))}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return t(n,e[n])}))}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),J=function(){function e(t,n){c(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return h(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}()}])}));

/***/ })

});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29udGV4dC9BdXRoQ29udGV4dC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3Bob2VuaXgvcHJpdi9zdGF0aWMvcGhvZW5peC5qcyJdLCJuYW1lcyI6WyJBdXRoQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJjYWxsQVBJIiwicGF0aCIsIm1ldGhvZCIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwiZmV0Y2giLCJBUElfVVJMIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJBdXRoUHJvdmlkZXIiLCJwcm9wcyIsInVzZVN0YXRlIiwidXNlciIsInNldFVzZXIiLCJyb29tRGF0YSIsInNldFJvb21EYXRhIiwicm91dGVyIiwidXNlUm91dGVyIiwic3VjY2Vzc1RvYXN0IiwidGV4dCIsInN1YnRleHQiLCJ0b2FzdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJzdGF0dXMiLCJkdXJhdGlvbiIsImlzQ2xvc2FibGUiLCJlcnJvclRvYXN0IiwiZmV0Y2hSb29tIiwicm9vbUlkIiwic29ja2V0IiwiU29ja2V0IiwiU09DS0VUX1VSTCIsImNvbm5lY3QiLCJjaGFubmVsIiwiam9pbiIsInJlY2VpdmUiLCJpZCIsInJvb20iLCJwaWQiLCJyZWFzb24iLCJlcnJvciIsIm9uIiwibXNnIiwibmV3X3VzZXIiLCJsZWF2ZSIsImRpc2Nvbm5lY3QiLCJyZWdpc3RlclVzZXIiLCJ2YWx1ZXMiLCJhY3Rpb25zIiwic2V0U3VibWl0dGluZyIsInVzZXJuYW1lIiwic2lnbnVwX3VzZXJuYW1lIiwiZW1haWwiLCJzaWdudXBfZW1haWwiLCJwYXNzd29yZCIsInNpZ251cF9wYXNzd29yZCIsImxvZ2luVXNlciIsImxvZ291dFVzZXIiLCJjaGVja1VzZXJMb2dnZWRJbiIsInVzZUVmZmVjdCIsImNoaWxkcmVuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7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QUFnQixnQkFBZ0Isd0VBQXdFLGFBQWEsNkJBQTZCLHVDQUF1QyxFQUFFLHVDQUF1QyxXQUFXLDJEQUEyRCwrQkFBK0IsaUNBQWlDLEtBQUssR0FBRyxHQUFHLEciLCJmaWxlIjoic3RhdGljL3dlYnBhY2svcGFnZXMvX2FwcC4yNTM2OGExMmNkYTExNDUyY2JmYS5ob3QtdXBkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAncGhvZW5peCdcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xuaW1wb3J0IHsgQVBJX1VSTCwgU09DS0VUX1VSTCB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJ1xuXG5jb25zdCBBdXRoQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKVxuXG5leHBvcnQgY29uc3QgY2FsbEFQSSA9IGFzeW5jIChwYXRoLCBtZXRob2QsIGJvZHkpID0+IHtcbiAgICBjb25zb2xlLmxvZygnZmV0Y2hpbmcuLi4nKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX1VSTH0ke3BhdGh9YCwge1xuICAgICAgICBtZXRob2QsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXG4gICAgfSlcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgcmV0dXJuIGRhdGFcbn1cblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlciA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKCcnKVxuICAgIGNvbnN0IFtyb29tRGF0YSwgc2V0Um9vbURhdGFdID0gdXNlU3RhdGUoe30pXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcblxuICAgIGNvbnN0IHN1Y2Nlc3NUb2FzdCA9ICh0ZXh0LCBzdWJ0ZXh0PVwiXCIsIHRvYXN0KSA9PiB7XG4gICAgICAgIHJldHVybiB0b2FzdCh7XG4gICAgICAgICAgICB0aXRsZTogdGV4dCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdWJ0ZXh0LFxuICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICBkdXJhdGlvbjogMzAwMCxcbiAgICAgICAgICAgIGlzQ2xvc2FibGU6IHRydWUsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3JUb2FzdCA9ICh0ZXh0LCBzdWJ0ZXh0PVwiXCIsIHRvYXN0KSA9PiB7XG4gICAgICAgIHJldHVybiB0b2FzdCh7XG4gICAgICAgICAgICB0aXRsZTogdGV4dCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdWJ0ZXh0LFxuICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgZHVyYXRpb246IDMwMDAsXG4gICAgICAgICAgICBpc0Nsb3NhYmxlOiB0cnVlLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGZldGNoUm9vbSA9IGFzeW5jIChyb29tSWQpID0+IHtcbiAgICAgICAgLy8gY29uc3Qgcm9vbSA9IGF3YWl0IGpvaW5Sb29tKHJvb21JZClcbiAgICAgICAgY29uc29sZS5sb2coJ2pvaW5pbiByb29tIGNoYW5uZWwuLi4nKVxuICAgICAgICBjb25zdCBzb2NrZXQgPSBuZXcgU29ja2V0KFNPQ0tFVF9VUkwpXG5cbiAgICAgICAgc29ja2V0LmNvbm5lY3QoKVxuICAgICAgICBjb25zb2xlLmxvZyhzb2NrZXQpXG5cbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHNvY2tldC5jaGFubmVsKGByb29tOiR7cm9vbUlkfWApXG4gICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwpXG4gICAgICAgIGNoYW5uZWwuam9pbigpXG4gICAgICAgIC5yZWNlaXZlKCdvaycsICh7aWQsIHJvb20sIHBpZH0pID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb29tIGlkOiAnLCBpZClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb29tIGRhdGE6ICcsIHJvb20pXG4gICAgICAgICAgICBzZXRSb29tRGF0YShyb29tKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jvb20gcGlkOiAnLCBwaWQpXG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKCdlcnJvcicsIHJlYXNvbiA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbilcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zb2xlLmxvZyhjaGFubmVsKVxuXG4gICAgICAgIGNoYW5uZWwub24oJ21zZycsICh7bXNnfSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ21zZycsIG1zZylcbiAgICAgICAgfSlcblxuICAgICAgICBjaGFubmVsLm9uKCdyb29tX3VwZGF0ZScsICh7IG5ld191c2VyIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb29tX3VwZGF0ZSwgbmV3IHVzZXI6ICcsICBuZXdfdXNlcilcbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2hhbm5lbC5sZWF2ZSgpXG4gICAgICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZWdpc3RlclVzZXIgPSBhc3luYyAodmFsdWVzLCB0b2FzdCwgYWN0aW9ucykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYWN0aW9ucy5zZXRTdWJtaXR0aW5nKHRydWUpXG4gICAgICAgICAgICBjb25zdCBib2R5ID0gIHtcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdmFsdWVzLnNpZ251cF91c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHZhbHVlcy5zaWdudXBfZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB2YWx1ZXMuc2lnbnVwX3Bhc3N3b3JkLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYWxsQVBJKCcvYXV0aC9yZWdpc3RlcicsICdQT1NUJywgYm9keSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIWRhdGEuZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cmF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4gXCIsIGRhdGEpXG4gICAgICAgICAgICAgICAgZXJyb3JUb2FzdChcIkZhaWxlZCB0byByZWdpc3RlclwiLCBcIlwiLCB0b2FzdClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc1RvYXN0KFwiU3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZCBhY2NvdW50XCIsIFwiQ2hlY2sgeW91ciBOVVMgZW1haWwgJiBjb25maXJtIHlvdXIgYWNjb3VudCBiZWZvcmUgbG9nZ2luZyBpbiFcIiwgdG9hc3QpXG4gICAgICAgICAgICAgICAgc2V0VXNlcihkYXRhLmRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rpb25zLnNldFN1Ym1pdHRpbmcoZmFsc2UpXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ2luIHVzZXIgdmlhIDNyZCBwYXJ0eSBwcm92aWRlclxuICAgICAqIEBwYXJhbSB7YW55fSB0b2tlbiBvYnRhaW5lZCBieSBwcm92aWRlciB0byBtYWtlIGF1dGhvcml6ZWQgcmVxdWVzdHMgdG8gZ2V0IHVzZXIgaW5mbyBmcm9tIHByb3ZpZGVyICh1c2VybmFtZSwgZW1haWwsIGV0YylcbiAgICAgKi9cbiAgICBjb25zdCBsb2dpblVzZXIgPSBhc3luYyAodmFsdWVzLCB0b2FzdCwgYWN0aW9ucykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYWN0aW9ucy5zZXRTdWJtaXR0aW5nKHRydWUpXG4gICAgICAgICAgICBjb25zdCBib2R5ID0gIHtcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogdmFsdWVzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FsbEFQSSgnL2F1dGgvbG9naW4nLCAnUE9TVCcsIGJvZHkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGRhdGEuZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gZGF0YS5kYXRhLnVzZXJuYW1lXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBsb2dnZWQgaW4gJywgdXNlcm5hbWUpXG4gICAgICAgICAgICAgICAgc3VjY2Vzc1RvYXN0KFwiU3VjY2Vzc2Z1bGx5IGxvZ2dlZCBpblwiLCBcIlwiLCB0b2FzdClcbiAgICAgICAgICAgICAgICBzZXRVc2VyKGRhdGEuZGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2dpbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIGRhdGEpXG4gICAgICAgICAgICAgICAgZXJyb3JUb2FzdChcIkZhaWxlZCB0byBsb2cgaW5cIiwgXCJDaGVjayB5b3VyIGVtYWlsIChpZiB5b3UgaGF2ZW50IGNvbmZpcm1lZCB5b3VyIGFjY291bnQpIG9yIGNvbnRhY3QgYWRtaW4hXCIsIHRvYXN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0aW9ucy5zZXRTdWJtaXR0aW5nKGZhbHNlKVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIHVzZXIgb3V0IGJ5IHNldHRpbmcgdXNlciB0byBudWxsXG4gICAgICovXG4gICAgY29uc3QgbG9nb3V0VXNlciA9IGFzeW5jICgpID0+IHtcblxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrVXNlckxvZ2dlZEluID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tpbmcgaWYgdXNlciBsb2dnZWQgaW4uLi4uLicpXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYWxsQVBJKCcvYXV0aC9tZScsICdHRVQnKVxuICAgICAgICBpZiAoZGF0YS5kYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXNlciBsb2dnZWQgaW46ICcsIGRhdGEuZGF0YSlcbiAgICAgICAgICAgIHNldFVzZXIoZGF0YS5kYXRhKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VXNlcihudWxsKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY2hlY2tVc2VyTG9nZ2VkSW4oKVxuICAgIH0sIFtdKVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEF1dGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IFxuICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgIHJvb21EYXRhLFxuICAgICAgICAgICAgcmVnaXN0ZXJVc2VyLCBcbiAgICAgICAgICAgIGxvZ2luVXNlcixcbiAgICAgICAgICAgIGxvZ291dFVzZXIsXG4gICAgICAgICAgICBmZXRjaFJvb21cbiAgICAgICAgfX0+XG4gICAgICAgICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvQXV0aENvbnRleHQuUHJvdmlkZXI+XG4gICAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBBdXRoQ29udGV4dCIsIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuUGhvZW5peD10KCk6ZS5QaG9lbml4PXQoKX0odGhpcywoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9e307ZnVuY3Rpb24gbihpKXtpZih0W2ldKXJldHVybiB0W2ldLmV4cG9ydHM7dmFyIG89dFtpXT17aTppLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbaV0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsbiksby5sPSEwLG8uZXhwb3J0c31yZXR1cm4gbi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxpKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6aX0pfSxuLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKGkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgbyBpbiBlKW4uZChpLG8sZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxvKSk7cmV0dXJuIGl9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsXCJhXCIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9XCJcIixuKG4ucz0wKX0oW2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24odCl7ZS5leHBvcnRzPXQuUGhvZW5peD1uKDIpfSkuY2FsbCh0aGlzLG4oMSkpfSxmdW5jdGlvbihlLHQpe3ZhciBuO249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7bj1ufHxuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKGUpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJihuPXdpbmRvdyl9ZS5leHBvcnRzPW59LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBhKGUpfShlKXx8ZnVuY3Rpb24oZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX0oZSl8fHMoZSl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHwhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpKXJldHVybjt2YXIgbj1bXSxpPSEwLG89ITEscj12b2lkIDA7dHJ5e2Zvcih2YXIgcyxhPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0ocz1hLm5leHQoKSkuZG9uZSkmJihuLnB1c2gocy52YWx1ZSksIXR8fG4ubGVuZ3RoIT09dCk7aT0hMCk7fWNhdGNoKGUpe289ITAscj1lfWZpbmFsbHl7dHJ5e2l8fG51bGw9PWEucmV0dXJufHxhLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyByfX1yZXR1cm4gbn0oZSx0KXx8cyhlLHQpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gcyhlLHQpe2lmKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBhKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKG4pOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9hKGUsdCk6dm9pZCAwfX1mdW5jdGlvbiBhKGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciBuPTAsaT1uZXcgQXJyYXkodCk7bjx0O24rKylpW25dPWVbbl07cmV0dXJuIGl9ZnVuY3Rpb24gYyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19ZnVuY3Rpb24gaChlLHQsbil7cmV0dXJuIHQmJnUoZS5wcm90b3R5cGUsdCksbiYmdShlLG4pLGV9bi5yKHQpLG4uZCh0LFwiQ2hhbm5lbFwiLChmdW5jdGlvbigpe3JldHVybiBffSkpLG4uZCh0LFwiU2VyaWFsaXplclwiLChmdW5jdGlvbigpe3JldHVybiBIfSkpLG4uZCh0LFwiU29ja2V0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFV9KSksbi5kKHQsXCJMb25nUG9sbFwiLChmdW5jdGlvbigpe3JldHVybiBEfSkpLG4uZCh0LFwiQWpheFwiLChmdW5jdGlvbigpe3JldHVybiBNfSkpLG4uZCh0LFwiUHJlc2VuY2VcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTn0pKTt2YXIgbD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOm51bGwsZj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpudWxsLGQ9bHx8Znx8dm9pZCAwLHA9MCx2PTEseT0yLG09MyxnPVwiY2xvc2VkXCIsaz1cImVycm9yZWRcIixiPVwiam9pbmVkXCIsaj1cImpvaW5pbmdcIixDPVwibGVhdmluZ1wiLEU9XCJwaHhfY2xvc2VcIixSPVwicGh4X2Vycm9yXCIsVD1cInBoeF9qb2luXCIsUz1cInBoeF9yZXBseVwiLHc9XCJwaHhfbGVhdmVcIixBPVtFLFIsVCxTLHddLEw9XCJsb25ncG9sbFwiLHg9XCJ3ZWJzb2NrZXRcIixPPWZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV9fSxQPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4saSxvKXtjKHRoaXMsZSksdGhpcy5jaGFubmVsPXQsdGhpcy5ldmVudD1uLHRoaXMucGF5bG9hZD1pfHxmdW5jdGlvbigpe3JldHVybnt9fSx0aGlzLnJlY2VpdmVkUmVzcD1udWxsLHRoaXMudGltZW91dD1vLHRoaXMudGltZW91dFRpbWVyPW51bGwsdGhpcy5yZWNIb29rcz1bXSx0aGlzLnNlbnQ9ITF9cmV0dXJuIGgoZSxbe2tleTpcInJlc2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudGltZW91dD1lLHRoaXMucmVzZXQoKSx0aGlzLnNlbmQoKX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhc1JlY2VpdmVkKFwidGltZW91dFwiKXx8KHRoaXMuc3RhcnRUaW1lb3V0KCksdGhpcy5zZW50PSEwLHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7dG9waWM6dGhpcy5jaGFubmVsLnRvcGljLGV2ZW50OnRoaXMuZXZlbnQscGF5bG9hZDp0aGlzLnBheWxvYWQoKSxyZWY6dGhpcy5yZWYsam9pbl9yZWY6dGhpcy5jaGFubmVsLmpvaW5SZWYoKX0pKX19LHtrZXk6XCJyZWNlaXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5oYXNSZWNlaXZlZChlKSYmdCh0aGlzLnJlY2VpdmVkUmVzcC5yZXNwb25zZSksdGhpcy5yZWNIb29rcy5wdXNoKHtzdGF0dXM6ZSxjYWxsYmFjazp0fSksdGhpc319LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxSZWZFdmVudCgpLHRoaXMucmVmPW51bGwsdGhpcy5yZWZFdmVudD1udWxsLHRoaXMucmVjZWl2ZWRSZXNwPW51bGwsdGhpcy5zZW50PSExfX0se2tleTpcIm1hdGNoUmVjZWl2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhdHVzLG49ZS5yZXNwb25zZTtlLnJlZjt0aGlzLnJlY0hvb2tzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdHVzPT09dH0pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jYWxsYmFjayhuKX0pKX19LHtrZXk6XCJjYW5jZWxSZWZFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZWZFdmVudCYmdGhpcy5jaGFubmVsLm9mZih0aGlzLnJlZkV2ZW50KX19LHtrZXk6XCJjYW5jZWxUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpLHRoaXMudGltZW91dFRpbWVyPW51bGx9fSx7a2V5Olwic3RhcnRUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMudGltZW91dFRpbWVyJiZ0aGlzLmNhbmNlbFRpbWVvdXQoKSx0aGlzLnJlZj10aGlzLmNoYW5uZWwuc29ja2V0Lm1ha2VSZWYoKSx0aGlzLnJlZkV2ZW50PXRoaXMuY2hhbm5lbC5yZXBseUV2ZW50TmFtZSh0aGlzLnJlZiksdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsKGZ1bmN0aW9uKHQpe2UuY2FuY2VsUmVmRXZlbnQoKSxlLmNhbmNlbFRpbWVvdXQoKSxlLnJlY2VpdmVkUmVzcD10LGUubWF0Y2hSZWNlaXZlKHQpfSkpLHRoaXMudGltZW91dFRpbWVyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS50cmlnZ2VyKFwidGltZW91dFwiLHt9KX0pLHRoaXMudGltZW91dCl9fSx7a2V5OlwiaGFzUmVjZWl2ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWNlaXZlZFJlc3AmJnRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cz09PWV9fSx7a2V5OlwidHJpZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCx7c3RhdHVzOmUscmVzcG9uc2U6dH0pfX1dKSxlfSgpLF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixpKXt2YXIgbz10aGlzO2ModGhpcyxlKSx0aGlzLnN0YXRlPWcsdGhpcy50b3BpYz10LHRoaXMucGFyYW1zPU8obnx8e30pLHRoaXMuc29ja2V0PWksdGhpcy5iaW5kaW5ncz1bXSx0aGlzLmJpbmRpbmdSZWY9MCx0aGlzLnRpbWVvdXQ9dGhpcy5zb2NrZXQudGltZW91dCx0aGlzLmpvaW5lZE9uY2U9ITEsdGhpcy5qb2luUHVzaD1uZXcgUCh0aGlzLFQsdGhpcy5wYXJhbXMsdGhpcy50aW1lb3V0KSx0aGlzLnB1c2hCdWZmZXI9W10sdGhpcy5zdGF0ZUNoYW5nZVJlZnM9W10sdGhpcy5yZWpvaW5UaW1lcj1uZXcgSigoZnVuY3Rpb24oKXtvLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZvLnJlam9pbigpfSksdGhpcy5zb2NrZXQucmVqb2luQWZ0ZXJNcyksdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkVycm9yKChmdW5jdGlvbigpe3JldHVybiBvLnJlam9pblRpbWVyLnJlc2V0KCl9KSkpLHRoaXMuc3RhdGVDaGFuZ2VSZWZzLnB1c2godGhpcy5zb2NrZXQub25PcGVuKChmdW5jdGlvbigpe28ucmVqb2luVGltZXIucmVzZXQoKSxvLmlzRXJyb3JlZCgpJiZvLnJlam9pbigpfSkpKSx0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLChmdW5jdGlvbigpe28uc3RhdGU9YixvLnJlam9pblRpbWVyLnJlc2V0KCksby5wdXNoQnVmZmVyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNlbmQoKX0pKSxvLnB1c2hCdWZmZXI9W119KSksdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwiZXJyb3JcIiwoZnVuY3Rpb24oKXtvLnN0YXRlPWssby5zb2NrZXQuaXNDb25uZWN0ZWQoKSYmby5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKX0pKSx0aGlzLm9uQ2xvc2UoKGZ1bmN0aW9uKCl7by5yZWpvaW5UaW1lci5yZXNldCgpLG8uc29ja2V0Lmhhc0xvZ2dlcigpJiZvLnNvY2tldC5sb2coXCJjaGFubmVsXCIsXCJjbG9zZSBcIi5jb25jYXQoby50b3BpYyxcIiBcIikuY29uY2F0KG8uam9pblJlZigpKSksby5zdGF0ZT1nLG8uc29ja2V0LnJlbW92ZShvKX0pKSx0aGlzLm9uRXJyb3IoKGZ1bmN0aW9uKGUpe28uc29ja2V0Lmhhc0xvZ2dlcigpJiZvLnNvY2tldC5sb2coXCJjaGFubmVsXCIsXCJlcnJvciBcIi5jb25jYXQoby50b3BpYyksZSksby5pc0pvaW5pbmcoKSYmby5qb2luUHVzaC5yZXNldCgpLG8uc3RhdGU9ayxvLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZvLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpfSkpLHRoaXMuam9pblB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwoZnVuY3Rpb24oKXtvLnNvY2tldC5oYXNMb2dnZXIoKSYmby5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLFwidGltZW91dCBcIi5jb25jYXQoby50b3BpYyxcIiAoXCIpLmNvbmNhdChvLmpvaW5SZWYoKSxcIilcIiksby5qb2luUHVzaC50aW1lb3V0KSxuZXcgUChvLHcsTyh7fSksby50aW1lb3V0KS5zZW5kKCksby5zdGF0ZT1rLG8uam9pblB1c2gucmVzZXQoKSxvLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZvLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpfSkpLHRoaXMub24oUywoZnVuY3Rpb24oZSx0KXtvLnRyaWdnZXIoby5yZXBseUV2ZW50TmFtZSh0KSxlKX0pKX1yZXR1cm4gaChlLFt7a2V5Olwiam9pblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMudGltZW91dDtpZih0aGlzLmpvaW5lZE9uY2UpdGhyb3cgbmV3IEVycm9yKFwidHJpZWQgdG8gam9pbiBtdWx0aXBsZSB0aW1lcy4gJ2pvaW4nIGNhbiBvbmx5IGJlIGNhbGxlZCBhIHNpbmdsZSB0aW1lIHBlciBjaGFubmVsIGluc3RhbmNlXCIpO3JldHVybiB0aGlzLnRpbWVvdXQ9ZSx0aGlzLmpvaW5lZE9uY2U9ITAsdGhpcy5yZWpvaW4oKSx0aGlzLmpvaW5QdXNofX0se2tleTpcIm9uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm9uKEUsZSl9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKFIsKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSkpfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmJpbmRpbmdSZWYrKztyZXR1cm4gdGhpcy5iaW5kaW5ncy5wdXNoKHtldmVudDplLHJlZjpuLGNhbGxiYWNrOnR9KSxufX0se2tleTpcIm9mZlwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzLmZpbHRlcigoZnVuY3Rpb24obil7cmV0dXJuIShuLmV2ZW50PT09ZSYmKHZvaWQgMD09PXR8fHQ9PT1uLnJlZikpfSkpfX0se2tleTpcImNhblB1c2hcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpJiZ0aGlzLmlzSm9pbmVkKCl9fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnRoaXMudGltZW91dDtpZih0PXR8fHt9LCF0aGlzLmpvaW5lZE9uY2UpdGhyb3cgbmV3IEVycm9yKFwidHJpZWQgdG8gcHVzaCAnXCIuY29uY2F0KGUsXCInIHRvICdcIikuY29uY2F0KHRoaXMudG9waWMsXCInIGJlZm9yZSBqb2luaW5nLiBVc2UgY2hhbm5lbC5qb2luKCkgYmVmb3JlIHB1c2hpbmcgZXZlbnRzXCIpKTt2YXIgaT1uZXcgUCh0aGlzLGUsKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KSxuKTtyZXR1cm4gdGhpcy5jYW5QdXNoKCk/aS5zZW5kKCk6KGkuc3RhcnRUaW1lb3V0KCksdGhpcy5wdXNoQnVmZmVyLnB1c2goaSkpLGl9fSx7a2V5OlwibGVhdmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy50aW1lb3V0O3RoaXMucmVqb2luVGltZXIucmVzZXQoKSx0aGlzLmpvaW5QdXNoLmNhbmNlbFRpbWVvdXQoKSx0aGlzLnN0YXRlPUM7dmFyIG49ZnVuY3Rpb24oKXtlLnNvY2tldC5oYXNMb2dnZXIoKSYmZS5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLFwibGVhdmUgXCIuY29uY2F0KGUudG9waWMpKSxlLnRyaWdnZXIoRSxcImxlYXZlXCIpfSxpPW5ldyBQKHRoaXMsdyxPKHt9KSx0KTtyZXR1cm4gaS5yZWNlaXZlKFwib2tcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbigpfSkpLnJlY2VpdmUoXCJ0aW1lb3V0XCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG4oKX0pKSxpLnNlbmQoKSx0aGlzLmNhblB1c2goKXx8aS50cmlnZ2VyKFwib2tcIix7fSksaX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHR9fSx7a2V5OlwiaXNMaWZlY3ljbGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBBLmluZGV4T2YoZSk+PTB9fSx7a2V5OlwiaXNNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy50b3BpYz09PWUmJighaXx8aT09PXRoaXMuam9pblJlZigpfHwhdGhpcy5pc0xpZmVjeWNsZUV2ZW50KHQpfHwodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkmJnRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIixcImRyb3BwaW5nIG91dGRhdGVkIG1lc3NhZ2VcIix7dG9waWM6ZSxldmVudDp0LHBheWxvYWQ6bixqb2luUmVmOml9KSwhMSkpfX0se2tleTpcImpvaW5SZWZcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW5QdXNoLnJlZn19LHtrZXk6XCJyZWpvaW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnRpbWVvdXQ7dGhpcy5pc0xlYXZpbmcoKXx8KHRoaXMuc29ja2V0LmxlYXZlT3BlblRvcGljKHRoaXMudG9waWMpLHRoaXMuc3RhdGU9aix0aGlzLmpvaW5QdXNoLnJlc2VuZChlKSl9fSx7a2V5OlwidHJpZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvPXRoaXMub25NZXNzYWdlKGUsdCxuLGkpO2lmKHQmJiFvKXRocm93IG5ldyBFcnJvcihcImNoYW5uZWwgb25NZXNzYWdlIGNhbGxiYWNrcyBtdXN0IHJldHVybiB0aGUgcGF5bG9hZCwgbW9kaWZpZWQgb3IgdW5tb2RpZmllZFwiKTtmb3IodmFyIHI9dGhpcy5iaW5kaW5ncy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmV2ZW50PT09ZX0pKSxzPTA7czxyLmxlbmd0aDtzKyspe3Jbc10uY2FsbGJhY2sobyxuLGl8fHRoaXMuam9pblJlZigpKX19fSx7a2V5OlwicmVwbHlFdmVudE5hbWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm5cImNoYW5fcmVwbHlfXCIuY29uY2F0KGUpfX0se2tleTpcImlzQ2xvc2VkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZT09PWd9fSx7a2V5OlwiaXNFcnJvcmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZT09PWt9fSx7a2V5OlwiaXNKb2luZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlPT09Yn19LHtrZXk6XCJpc0pvaW5pbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlPT09an19LHtrZXk6XCJpc0xlYXZpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlPT09Q319XSksZX0oKSxIPXtIRUFERVJfTEVOR1RIOjEsTUVUQV9MRU5HVEg6NCxLSU5EUzp7cHVzaDowLHJlcGx5OjEsYnJvYWRjYXN0OjJ9LGVuY29kZTpmdW5jdGlvbihlLHQpe2lmKGUucGF5bG9hZC5jb25zdHJ1Y3Rvcj09PUFycmF5QnVmZmVyKXJldHVybiB0KHRoaXMuYmluYXJ5RW5jb2RlKGUpKTt2YXIgbj1bZS5qb2luX3JlZixlLnJlZixlLnRvcGljLGUuZXZlbnQsZS5wYXlsb2FkXTtyZXR1cm4gdChKU09OLnN0cmluZ2lmeShuKSl9LGRlY29kZTpmdW5jdGlvbihlLHQpe2lmKGUuY29uc3RydWN0b3I9PT1BcnJheUJ1ZmZlcilyZXR1cm4gdCh0aGlzLmJpbmFyeURlY29kZShlKSk7dmFyIG49cihKU09OLnBhcnNlKGUpLDUpO3JldHVybiB0KHtqb2luX3JlZjpuWzBdLHJlZjpuWzFdLHRvcGljOm5bMl0sZXZlbnQ6blszXSxwYXlsb2FkOm5bNF19KX0sYmluYXJ5RW5jb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuam9pbl9yZWYsbj1lLnJlZixpPWUuZXZlbnQsbz1lLnRvcGljLHI9ZS5wYXlsb2FkLHM9dGhpcy5NRVRBX0xFTkdUSCt0Lmxlbmd0aCtuLmxlbmd0aCtvLmxlbmd0aCtpLmxlbmd0aCxhPW5ldyBBcnJheUJ1ZmZlcih0aGlzLkhFQURFUl9MRU5HVEgrcyksYz1uZXcgRGF0YVZpZXcoYSksdT0wO2Muc2V0VWludDgodSsrLHRoaXMuS0lORFMucHVzaCksYy5zZXRVaW50OCh1KyssdC5sZW5ndGgpLGMuc2V0VWludDgodSsrLG4ubGVuZ3RoKSxjLnNldFVpbnQ4KHUrKyxvLmxlbmd0aCksYy5zZXRVaW50OCh1KyssaS5sZW5ndGgpLEFycmF5LmZyb20odCwoZnVuY3Rpb24oZSl7cmV0dXJuIGMuc2V0VWludDgodSsrLGUuY2hhckNvZGVBdCgwKSl9KSksQXJyYXkuZnJvbShuLChmdW5jdGlvbihlKXtyZXR1cm4gYy5zZXRVaW50OCh1KyssZS5jaGFyQ29kZUF0KDApKX0pKSxBcnJheS5mcm9tKG8sKGZ1bmN0aW9uKGUpe3JldHVybiBjLnNldFVpbnQ4KHUrKyxlLmNoYXJDb2RlQXQoMCkpfSkpLEFycmF5LmZyb20oaSwoZnVuY3Rpb24oZSl7cmV0dXJuIGMuc2V0VWludDgodSsrLGUuY2hhckNvZGVBdCgwKSl9KSk7dmFyIGg9bmV3IFVpbnQ4QXJyYXkoYS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCk7cmV0dXJuIGguc2V0KG5ldyBVaW50OEFycmF5KGEpLDApLGguc2V0KG5ldyBVaW50OEFycmF5KHIpLGEuYnl0ZUxlbmd0aCksaC5idWZmZXJ9LGJpbmFyeURlY29kZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0YVZpZXcoZSksbj10LmdldFVpbnQ4KDApLGk9bmV3IFRleHREZWNvZGVyO3N3aXRjaChuKXtjYXNlIHRoaXMuS0lORFMucHVzaDpyZXR1cm4gdGhpcy5kZWNvZGVQdXNoKGUsdCxpKTtjYXNlIHRoaXMuS0lORFMucmVwbHk6cmV0dXJuIHRoaXMuZGVjb2RlUmVwbHkoZSx0LGkpO2Nhc2UgdGhpcy5LSU5EUy5icm9hZGNhc3Q6cmV0dXJuIHRoaXMuZGVjb2RlQnJvYWRjYXN0KGUsdCxpKX19LGRlY29kZVB1c2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXQuZ2V0VWludDgoMSksbz10LmdldFVpbnQ4KDIpLHI9dC5nZXRVaW50OCgzKSxzPXRoaXMuSEVBREVSX0xFTkdUSCt0aGlzLk1FVEFfTEVOR1RILTEsYT1uLmRlY29kZShlLnNsaWNlKHMscytpKSk7cys9aTt2YXIgYz1uLmRlY29kZShlLnNsaWNlKHMscytvKSk7cys9bzt2YXIgdT1uLmRlY29kZShlLnNsaWNlKHMscytyKSk7cmV0dXJuIHMrPXIse2pvaW5fcmVmOmEscmVmOm51bGwsdG9waWM6YyxldmVudDp1LHBheWxvYWQ6ZS5zbGljZShzLGUuYnl0ZUxlbmd0aCl9fSxkZWNvZGVSZXBseTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dC5nZXRVaW50OCgxKSxvPXQuZ2V0VWludDgoMikscj10LmdldFVpbnQ4KDMpLHM9dC5nZXRVaW50OCg0KSxhPXRoaXMuSEVBREVSX0xFTkdUSCt0aGlzLk1FVEFfTEVOR1RILGM9bi5kZWNvZGUoZS5zbGljZShhLGEraSkpO2ErPWk7dmFyIHU9bi5kZWNvZGUoZS5zbGljZShhLGErbykpO2ErPW87dmFyIGg9bi5kZWNvZGUoZS5zbGljZShhLGErcikpO2ErPXI7dmFyIGw9bi5kZWNvZGUoZS5zbGljZShhLGErcykpO2ErPXM7dmFyIGY9ZS5zbGljZShhLGUuYnl0ZUxlbmd0aCk7cmV0dXJue2pvaW5fcmVmOmMscmVmOnUsdG9waWM6aCxldmVudDpTLHBheWxvYWQ6e3N0YXR1czpsLHJlc3BvbnNlOmZ9fX0sZGVjb2RlQnJvYWRjYXN0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10LmdldFVpbnQ4KDEpLG89dC5nZXRVaW50OCgyKSxyPXRoaXMuSEVBREVSX0xFTkdUSCsyLHM9bi5kZWNvZGUoZS5zbGljZShyLHIraSkpO3IrPWk7dmFyIGE9bi5kZWNvZGUoZS5zbGljZShyLHIrbykpO3JldHVybiByKz1vLHtqb2luX3JlZjpudWxsLHJlZjpudWxsLHRvcGljOnMsZXZlbnQ6YSxwYXlsb2FkOmUuc2xpY2UocixlLmJ5dGVMZW5ndGgpfX19LFU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307Yyh0aGlzLGUpLHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3M9e29wZW46W10sY2xvc2U6W10sZXJyb3I6W10sbWVzc2FnZTpbXX0sdGhpcy5jaGFubmVscz1bXSx0aGlzLnNlbmRCdWZmZXI9W10sdGhpcy5yZWY9MCx0aGlzLnRpbWVvdXQ9aS50aW1lb3V0fHwxZTQsdGhpcy50cmFuc3BvcnQ9aS50cmFuc3BvcnR8fGQuV2ViU29ja2V0fHxELHRoaXMuZGVmYXVsdEVuY29kZXI9SC5lbmNvZGUuYmluZChIKSx0aGlzLmRlZmF1bHREZWNvZGVyPUguZGVjb2RlLmJpbmQoSCksdGhpcy5jbG9zZVdhc0NsZWFuPSExLHRoaXMudW5sb2FkZWQ9ITEsdGhpcy5iaW5hcnlUeXBlPWkuYmluYXJ5VHlwZXx8XCJhcnJheWJ1ZmZlclwiLHRoaXMudHJhbnNwb3J0IT09RD8odGhpcy5lbmNvZGU9aS5lbmNvZGV8fHRoaXMuZGVmYXVsdEVuY29kZXIsdGhpcy5kZWNvZGU9aS5kZWNvZGV8fHRoaXMuZGVmYXVsdERlY29kZXIpOih0aGlzLmVuY29kZT10aGlzLmRlZmF1bHRFbmNvZGVyLHRoaXMuZGVjb2RlPXRoaXMuZGVmYXVsdERlY29kZXIpLGYmJmYuYWRkRXZlbnRMaXN0ZW5lciYmZi5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsKGZ1bmN0aW9uKGUpe24uY29ubiYmKG4udW5sb2FkZWQ9ITAsbi5hYm5vcm1hbENsb3NlKFwidW5sb2FkZWRcIikpfSkpLHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcz1pLmhlYXJ0YmVhdEludGVydmFsTXN8fDNlNCx0aGlzLnJlam9pbkFmdGVyTXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGkucmVqb2luQWZ0ZXJNcz9pLnJlam9pbkFmdGVyTXMoZSk6WzFlMywyZTMsNWUzXVtlLTFdfHwxZTR9LHRoaXMucmVjb25uZWN0QWZ0ZXJNcz1mdW5jdGlvbihlKXtyZXR1cm4gbi51bmxvYWRlZD8xMDA6aS5yZWNvbm5lY3RBZnRlck1zP2kucmVjb25uZWN0QWZ0ZXJNcyhlKTpbMTAsNTAsMTAwLDE1MCwyMDAsMjUwLDUwMCwxZTMsMmUzXVtlLTFdfHw1ZTN9LHRoaXMubG9nZ2VyPWkubG9nZ2VyfHxudWxsLHRoaXMubG9uZ3BvbGxlclRpbWVvdXQ9aS5sb25ncG9sbGVyVGltZW91dHx8MmU0LHRoaXMucGFyYW1zPU8oaS5wYXJhbXN8fHt9KSx0aGlzLmVuZFBvaW50PVwiXCIuY29uY2F0KHQsXCIvXCIpLmNvbmNhdCh4KSx0aGlzLnZzbj1pLnZzbnx8XCIyLjAuMFwiLHRoaXMuaGVhcnRiZWF0VGltZXI9bnVsbCx0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWY9bnVsbCx0aGlzLnJlY29ubmVjdFRpbWVyPW5ldyBKKChmdW5jdGlvbigpe24udGVhcmRvd24oKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY29ubmVjdCgpfSkpfSksdGhpcy5yZWNvbm5lY3RBZnRlck1zKX1yZXR1cm4gaChlLFt7a2V5OlwicHJvdG9jb2xcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLyk/XCJ3c3NcIjpcIndzXCJ9fSx7a2V5OlwiZW5kUG9pbnRVUkxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPU0uYXBwZW5kUGFyYW1zKE0uYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsdGhpcy5wYXJhbXMoKSkse3Zzbjp0aGlzLnZzbn0pO3JldHVyblwiL1wiIT09ZS5jaGFyQXQoMCk/ZTpcIi9cIj09PWUuY2hhckF0KDEpP1wiXCIuY29uY2F0KHRoaXMucHJvdG9jb2woKSxcIjpcIikuY29uY2F0KGUpOlwiXCIuY29uY2F0KHRoaXMucHJvdG9jb2woKSxcIjovL1wiKS5jb25jYXQobG9jYXRpb24uaG9zdCkuY29uY2F0KGUpfX0se2tleTpcImRpc2Nvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5jbG9zZVdhc0NsZWFuPSEwLHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKSx0aGlzLnRlYXJkb3duKGUsdCxuKX19LHtrZXk6XCJjb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlJiYoY29uc29sZSYmY29uc29sZS5sb2coXCJwYXNzaW5nIHBhcmFtcyB0byBjb25uZWN0IGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQgcGFzcyA6cGFyYW1zIHRvIHRoZSBTb2NrZXQgY29uc3RydWN0b3JcIiksdGhpcy5wYXJhbXM9TyhlKSksdGhpcy5jb25ufHwodGhpcy5jbG9zZVdhc0NsZWFuPSExLHRoaXMuY29ubj1uZXcgdGhpcy50cmFuc3BvcnQodGhpcy5lbmRQb2ludFVSTCgpKSx0aGlzLmNvbm4uYmluYXJ5VHlwZT10aGlzLmJpbmFyeVR5cGUsdGhpcy5jb25uLnRpbWVvdXQ9dGhpcy5sb25ncG9sbGVyVGltZW91dCx0aGlzLmNvbm4ub25vcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHQub25Db25uT3BlbigpfSx0aGlzLmNvbm4ub25lcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gdC5vbkNvbm5FcnJvcihlKX0sdGhpcy5jb25uLm9ubWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gdC5vbkNvbm5NZXNzYWdlKGUpfSx0aGlzLmNvbm4ub25jbG9zZT1mdW5jdGlvbihlKXtyZXR1cm4gdC5vbkNvbm5DbG9zZShlKX0pfX0se2tleTpcImxvZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmxvZ2dlcihlLHQsbil9fSx7a2V5OlwiaGFzTG9nZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMubG9nZ2VyfX0se2tleTpcIm9uT3BlblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWFrZVJlZigpO3JldHVybiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm9wZW4ucHVzaChbdCxlXSksdH19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tYWtlUmVmKCk7cmV0dXJuIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChbdCxlXSksdH19LHtrZXk6XCJvbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tYWtlUmVmKCk7cmV0dXJuIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IucHVzaChbdCxlXSksdH19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1ha2VSZWYoKTtyZXR1cm4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLnB1c2goW3QsZV0pLHR9fSx7a2V5Olwib25Db25uT3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNMb2dnZXIoKSYmdGhpcy5sb2coXCJ0cmFuc3BvcnRcIixcImNvbm5lY3RlZCB0byBcIi5jb25jYXQodGhpcy5lbmRQb2ludFVSTCgpKSksdGhpcy51bmxvYWRlZD0hMSx0aGlzLmNsb3NlV2FzQ2xlYW49ITEsdGhpcy5mbHVzaFNlbmRCdWZmZXIoKSx0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KCksdGhpcy5yZXNldEhlYXJ0YmVhdCgpLHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4oMCxyKGUsMilbMV0pKCl9KSl9fSx7a2V5OlwicmVzZXRIZWFydGJlYXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5jb25uJiZ0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdHx8KHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZj1udWxsLGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lciksdGhpcy5oZWFydGJlYXRUaW1lcj1zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5zZW5kSGVhcnRiZWF0KCl9KSx0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpKX19LHtrZXk6XCJ0ZWFyZG93blwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzO2lmKCF0aGlzLmNvbm4pcmV0dXJuIGUmJmUoKTt0aGlzLndhaXRGb3JCdWZmZXJEb25lKChmdW5jdGlvbigpe2kuY29ubiYmKHQ/aS5jb25uLmNsb3NlKHQsbnx8XCJcIik6aS5jb25uLmNsb3NlKCkpLGkud2FpdEZvclNvY2tldENsb3NlZCgoZnVuY3Rpb24oKXtpLmNvbm4mJihpLmNvbm4ub25jbG9zZT1mdW5jdGlvbigpe30saS5jb25uPW51bGwpLGUmJmUoKX0pKX0pKX19LHtrZXk6XCJ3YWl0Rm9yQnVmZmVyRG9uZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTs1IT09biYmdGhpcy5jb25uJiZ0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQ/c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LndhaXRGb3JCdWZmZXJEb25lKGUsbisxKX0pLDE1MCpuKTplKCl9fSx7a2V5Olwid2FpdEZvclNvY2tldENsb3NlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTs1IT09biYmdGhpcy5jb25uJiZ0aGlzLmNvbm4ucmVhZHlTdGF0ZSE9PW0/c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LndhaXRGb3JTb2NrZXRDbG9zZWQoZSxuKzEpfSksMTUwKm4pOmUoKX19LHtrZXk6XCJvbkNvbm5DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzTG9nZ2VyKCkmJnRoaXMubG9nKFwidHJhbnNwb3J0XCIsXCJjbG9zZVwiLGUpLHRoaXMudHJpZ2dlckNoYW5FcnJvcigpLGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lciksdGhpcy5jbG9zZVdhc0NsZWFufHx0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuKDAscih0LDIpWzFdKShlKX0pKX19LHtrZXk6XCJvbkNvbm5FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzTG9nZ2VyKCkmJnRoaXMubG9nKFwidHJhbnNwb3J0XCIsZSksdGhpcy50cmlnZ2VyQ2hhbkVycm9yKCksdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4oMCxyKHQsMilbMV0pKGUpfSkpfX0se2tleTpcInRyaWdnZXJDaGFuRXJyb3JcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2hhbm5lbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pc0Vycm9yZWQoKXx8ZS5pc0xlYXZpbmcoKXx8ZS5pc0Nsb3NlZCgpfHxlLnRyaWdnZXIoUil9KSl9fSx7a2V5OlwiY29ubmVjdGlvblN0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jb25uJiZ0aGlzLmNvbm4ucmVhZHlTdGF0ZSl7Y2FzZSBwOnJldHVyblwiY29ubmVjdGluZ1wiO2Nhc2UgdjpyZXR1cm5cIm9wZW5cIjtjYXNlIHk6cmV0dXJuXCJjbG9zaW5nXCI7ZGVmYXVsdDpyZXR1cm5cImNsb3NlZFwifX19LHtrZXk6XCJpc0Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJvcGVuXCI9PT10aGlzLmNvbm5lY3Rpb25TdGF0ZSgpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMub2ZmKGUuc3RhdGVDaGFuZ2VSZWZzKSx0aGlzLmNoYW5uZWxzPXRoaXMuY2hhbm5lbHMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5qb2luUmVmKCkhPT1lLmpvaW5SZWYoKX0pKX19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW3RdPXRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3NbdF0uZmlsdGVyKChmdW5jdGlvbih0KXt2YXIgbj1yKHQsMSlbMF07cmV0dXJuLTE9PT1lLmluZGV4T2Yobil9KSl9fSx7a2V5OlwiY2hhbm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPW5ldyBfKGUsdCx0aGlzKTtyZXR1cm4gdGhpcy5jaGFubmVscy5wdXNoKG4pLG59fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5oYXNMb2dnZXIoKSl7dmFyIG49ZS50b3BpYyxpPWUuZXZlbnQsbz1lLnBheWxvYWQscj1lLnJlZixzPWUuam9pbl9yZWY7dGhpcy5sb2coXCJwdXNoXCIsXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGksXCIgKFwiKS5jb25jYXQocyxcIiwgXCIpLmNvbmNhdChyLFwiKVwiKSxvKX10aGlzLmlzQ29ubmVjdGVkKCk/dGhpcy5lbmNvZGUoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuY29ubi5zZW5kKGUpfSkpOnRoaXMuc2VuZEJ1ZmZlci5wdXNoKChmdW5jdGlvbigpe3JldHVybiB0LmVuY29kZShlLChmdW5jdGlvbihlKXtyZXR1cm4gdC5jb25uLnNlbmQoZSl9KSl9KSl9fSx7a2V5OlwibWFrZVJlZlwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZWYrMTtyZXR1cm4gZT09PXRoaXMucmVmP3RoaXMucmVmPTA6dGhpcy5yZWY9ZSx0aGlzLnJlZi50b1N0cmluZygpfX0se2tleTpcInNlbmRIZWFydGJlYXRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNDb25uZWN0ZWQoKSl7aWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXJldHVybiB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWY9bnVsbCx0aGlzLmhhc0xvZ2dlcigpJiZ0aGlzLmxvZyhcInRyYW5zcG9ydFwiLFwiaGVhcnRiZWF0IHRpbWVvdXQuIEF0dGVtcHRpbmcgdG8gcmUtZXN0YWJsaXNoIGNvbm5lY3Rpb25cIiksdm9pZCB0aGlzLmFibm9ybWFsQ2xvc2UoXCJoZWFydGJlYXQgdGltZW91dFwiKTt0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWY9dGhpcy5tYWtlUmVmKCksdGhpcy5wdXNoKHt0b3BpYzpcInBob2VuaXhcIixldmVudDpcImhlYXJ0YmVhdFwiLHBheWxvYWQ6e30scmVmOnRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pfX19LHtrZXk6XCJhYm5vcm1hbENsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jbG9zZVdhc0NsZWFuPSExLHRoaXMuY29ubi5yZWFkeVN0YXRlPT09diYmdGhpcy5jb25uLmNsb3NlKDFlMyxlKX19LHtrZXk6XCJmbHVzaFNlbmRCdWZmZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNDb25uZWN0ZWQoKSYmdGhpcy5zZW5kQnVmZmVyLmxlbmd0aD4wJiYodGhpcy5zZW5kQnVmZmVyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlKCl9KSksdGhpcy5zZW5kQnVmZmVyPVtdKX19LHtrZXk6XCJvbkNvbm5NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmRlY29kZShlLmRhdGEsKGZ1bmN0aW9uKGUpe3ZhciBuPWUudG9waWMsaT1lLmV2ZW50LG89ZS5wYXlsb2FkLHM9ZS5yZWYsYT1lLmpvaW5fcmVmO3MmJnM9PT10LnBlbmRpbmdIZWFydGJlYXRSZWYmJih0LnBlbmRpbmdIZWFydGJlYXRSZWY9bnVsbCksdC5oYXNMb2dnZXIoKSYmdC5sb2coXCJyZWNlaXZlXCIsXCJcIi5jb25jYXQoby5zdGF0dXN8fFwiXCIsXCIgXCIpLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoaSxcIiBcIikuY29uY2F0KHMmJlwiKFwiK3MrXCIpXCJ8fFwiXCIpLG8pO2Zvcih2YXIgYz0wO2M8dC5jaGFubmVscy5sZW5ndGg7YysrKXt2YXIgdT10LmNoYW5uZWxzW2NdO3UuaXNNZW1iZXIobixpLG8sYSkmJnUudHJpZ2dlcihpLG8scyxhKX1mb3IodmFyIGg9MDtoPHQuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5sZW5ndGg7aCsrKXsoMCxyKHQuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZVtoXSwyKVsxXSkoZSl9fSkpfX0se2tleTpcImxlYXZlT3BlblRvcGljXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jaGFubmVscy5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b3BpYz09PWUmJih0LmlzSm9pbmVkKCl8fHQuaXNKb2luaW5nKCkpfSkpO3QmJih0aGlzLmhhc0xvZ2dlcigpJiZ0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCdsZWF2aW5nIGR1cGxpY2F0ZSB0b3BpYyBcIicuY29uY2F0KGUsJ1wiJykpLHQubGVhdmUoKSl9fV0pLGV9KCksRD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7Yyh0aGlzLGUpLHRoaXMuZW5kUG9pbnQ9bnVsbCx0aGlzLnRva2VuPW51bGwsdGhpcy5za2lwSGVhcnRiZWF0PSEwLHRoaXMub25vcGVuPWZ1bmN0aW9uKCl7fSx0aGlzLm9uZXJyb3I9ZnVuY3Rpb24oKXt9LHRoaXMub25tZXNzYWdlPWZ1bmN0aW9uKCl7fSx0aGlzLm9uY2xvc2U9ZnVuY3Rpb24oKXt9LHRoaXMucG9sbEVuZHBvaW50PXRoaXMubm9ybWFsaXplRW5kcG9pbnQodCksdGhpcy5yZWFkeVN0YXRlPXAsdGhpcy5wb2xsKCl9cmV0dXJuIGgoZSxbe2tleTpcIm5vcm1hbGl6ZUVuZHBvaW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShcIndzOi8vXCIsXCJodHRwOi8vXCIpLnJlcGxhY2UoXCJ3c3M6Ly9cIixcImh0dHBzOi8vXCIpLnJlcGxhY2UobmV3IFJlZ0V4cChcIiguKikvXCIreCksXCIkMS9cIitMKX19LHtrZXk6XCJlbmRwb2ludFVSTFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE0uYXBwZW5kUGFyYW1zKHRoaXMucG9sbEVuZHBvaW50LHt0b2tlbjp0aGlzLnRva2VufSl9fSx7a2V5OlwiY2xvc2VBbmRSZXRyeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpLHRoaXMucmVhZHlTdGF0ZT1wfX0se2tleTpcIm9udGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vbmVycm9yKFwidGltZW91dFwiKSx0aGlzLmNsb3NlQW5kUmV0cnkoKX19LHtrZXk6XCJwb2xsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVhZHlTdGF0ZSE9PXYmJnRoaXMucmVhZHlTdGF0ZSE9PXB8fE0ucmVxdWVzdChcIkdFVFwiLHRoaXMuZW5kcG9pbnRVUkwoKSxcImFwcGxpY2F0aW9uL2pzb25cIixudWxsLHRoaXMudGltZW91dCx0aGlzLm9udGltZW91dC5iaW5kKHRoaXMpLChmdW5jdGlvbih0KXtpZih0KXt2YXIgbj10LnN0YXR1cyxpPXQudG9rZW4sbz10Lm1lc3NhZ2VzO2UudG9rZW49aX1lbHNlIG49MDtzd2l0Y2gobil7Y2FzZSAyMDA6by5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gZS5vbm1lc3NhZ2Uoe2RhdGE6dH0pfSkpLGUucG9sbCgpO2JyZWFrO2Nhc2UgMjA0OmUucG9sbCgpO2JyZWFrO2Nhc2UgNDEwOmUucmVhZHlTdGF0ZT12LGUub25vcGVuKCksZS5wb2xsKCk7YnJlYWs7Y2FzZSA0MDM6ZS5vbmVycm9yKCksZS5jbG9zZSgpO2JyZWFrO2Nhc2UgMDpjYXNlIDUwMDplLm9uZXJyb3IoKSxlLmNsb3NlQW5kUmV0cnkoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcInVuaGFuZGxlZCBwb2xsIHN0YXR1cyBcIi5jb25jYXQobikpfX0pKX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztNLnJlcXVlc3QoXCJQT1NUXCIsdGhpcy5lbmRwb2ludFVSTCgpLFwiYXBwbGljYXRpb24vanNvblwiLGUsdGhpcy50aW1lb3V0LHRoaXMub25lcnJvci5iaW5kKHRoaXMsXCJ0aW1lb3V0XCIpLChmdW5jdGlvbihlKXtlJiYyMDA9PT1lLnN0YXR1c3x8KHQub25lcnJvcihlJiZlLnN0YXR1cyksdC5jbG9zZUFuZFJldHJ5KCkpfSkpfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLnJlYWR5U3RhdGU9bSx0aGlzLm9uY2xvc2UoKX19XSksZX0oKSxNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2ModGhpcyxlKX1yZXR1cm4gaChlLG51bGwsW3trZXk6XCJyZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSxvLHIscyl7aWYoZC5YRG9tYWluUmVxdWVzdCl7dmFyIGE9bmV3IFhEb21haW5SZXF1ZXN0O3RoaXMueGRvbWFpblJlcXVlc3QoYSxlLHQsaSxvLHIscyl9ZWxzZXt2YXIgYz1uZXcgZC5YTUxIdHRwUmVxdWVzdDt0aGlzLnhoclJlcXVlc3QoYyxlLHQsbixpLG8scixzKX19fSx7a2V5OlwieGRvbWFpblJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixpLG8scixzKXt2YXIgYT10aGlzO2UudGltZW91dD1vLGUub3Blbih0LG4pLGUub25sb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9YS5wYXJzZUpTT04oZS5yZXNwb25zZVRleHQpO3MmJnModCl9LHImJihlLm9udGltZW91dD1yKSxlLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9LGUuc2VuZChpKX19LHtrZXk6XCJ4aHJSZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSxvLHIscyxhKXt2YXIgYz10aGlzO2Uub3Blbih0LG4sITApLGUudGltZW91dD1yLGUuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGkpLGUub25lcnJvcj1mdW5jdGlvbigpe2EmJmEobnVsbCl9LGUub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoZS5yZWFkeVN0YXRlPT09Yy5zdGF0ZXMuY29tcGxldGUmJmEpe3ZhciB0PWMucGFyc2VKU09OKGUucmVzcG9uc2VUZXh0KTthKHQpfX0scyYmKGUub250aW1lb3V0PXMpLGUuc2VuZChvKX19LHtrZXk6XCJwYXJzZUpTT05cIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZXx8XCJcIj09PWUpcmV0dXJuIG51bGw7dHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKHQpe3JldHVybiBjb25zb2xlJiZjb25zb2xlLmxvZyhcImZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlXCIsZSksbnVsbH19fSx7a2V5Olwic2VyaWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtmb3IodmFyIGkgaW4gZSlpZihlLmhhc093blByb3BlcnR5KGkpKXt2YXIgcj10P1wiXCIuY29uY2F0KHQsXCJbXCIpLmNvbmNhdChpLFwiXVwiKTppLHM9ZVtpXTtcIm9iamVjdFwiPT09byhzKT9uLnB1c2godGhpcy5zZXJpYWxpemUocyxyKSk6bi5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChyKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQocykpfXJldHVybiBuLmpvaW4oXCImXCIpfX0se2tleTpcImFwcGVuZFBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoMD09PU9iamVjdC5rZXlzKHQpLmxlbmd0aClyZXR1cm4gZTt2YXIgbj1lLm1hdGNoKC9cXD8vKT9cIiZcIjpcIj9cIjtyZXR1cm5cIlwiLmNvbmNhdChlKS5jb25jYXQobikuY29uY2F0KHRoaXMuc2VyaWFsaXplKHQpKX19XSksZX0oKTtNLnN0YXRlcz17Y29tcGxldGU6NH07dmFyIE49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307Yyh0aGlzLGUpO3ZhciBvPWkuZXZlbnRzfHx7c3RhdGU6XCJwcmVzZW5jZV9zdGF0ZVwiLGRpZmY6XCJwcmVzZW5jZV9kaWZmXCJ9O3RoaXMuc3RhdGU9e30sdGhpcy5wZW5kaW5nRGlmZnM9W10sdGhpcy5jaGFubmVsPXQsdGhpcy5qb2luUmVmPW51bGwsdGhpcy5jYWxsZXI9e29uSm9pbjpmdW5jdGlvbigpe30sb25MZWF2ZTpmdW5jdGlvbigpe30sb25TeW5jOmZ1bmN0aW9uKCl7fX0sdGhpcy5jaGFubmVsLm9uKG8uc3RhdGUsKGZ1bmN0aW9uKHQpe3ZhciBpPW4uY2FsbGVyLG89aS5vbkpvaW4scj1pLm9uTGVhdmUscz1pLm9uU3luYztuLmpvaW5SZWY9bi5jaGFubmVsLmpvaW5SZWYoKSxuLnN0YXRlPWUuc3luY1N0YXRlKG4uc3RhdGUsdCxvLHIpLG4ucGVuZGluZ0RpZmZzLmZvckVhY2goKGZ1bmN0aW9uKHQpe24uc3RhdGU9ZS5zeW5jRGlmZihuLnN0YXRlLHQsbyxyKX0pKSxuLnBlbmRpbmdEaWZmcz1bXSxzKCl9KSksdGhpcy5jaGFubmVsLm9uKG8uZGlmZiwoZnVuY3Rpb24odCl7dmFyIGk9bi5jYWxsZXIsbz1pLm9uSm9pbixyPWkub25MZWF2ZSxzPWkub25TeW5jO24uaW5QZW5kaW5nU3luY1N0YXRlKCk/bi5wZW5kaW5nRGlmZnMucHVzaCh0KToobi5zdGF0ZT1lLnN5bmNEaWZmKG4uc3RhdGUsdCxvLHIpLHMoKSl9KSl9cmV0dXJuIGgoZSxbe2tleTpcIm9uSm9pblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FsbGVyLm9uSm9pbj1lfX0se2tleTpcIm9uTGVhdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxlci5vbkxlYXZlPWV9fSx7a2V5Olwib25TeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jYWxsZXIub25TeW5jPWV9fSx7a2V5OlwibGlzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmxpc3QodGhpcy5zdGF0ZSx0KX19LHtrZXk6XCJpblBlbmRpbmdTeW5jU3RhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmpvaW5SZWZ8fHRoaXMuam9pblJlZiE9PXRoaXMuY2hhbm5lbC5qb2luUmVmKCl9fV0sW3trZXk6XCJzeW5jU3RhdGVcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixpKXt2YXIgbz10aGlzLHI9dGhpcy5jbG9uZShlKSxzPXt9LGE9e307cmV0dXJuIHRoaXMubWFwKHIsKGZ1bmN0aW9uKGUsbil7dFtlXXx8KGFbZV09bil9KSksdGhpcy5tYXAodCwoZnVuY3Rpb24oZSx0KXt2YXIgbj1yW2VdO2lmKG4pe3ZhciBpPXQubWV0YXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5waHhfcmVmfSkpLGM9bi5tZXRhcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBoeF9yZWZ9KSksdT10Lm1ldGFzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGMuaW5kZXhPZihlLnBoeF9yZWYpPDB9KSksaD1uLm1ldGFzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuaW5kZXhPZihlLnBoeF9yZWYpPDB9KSk7dS5sZW5ndGg+MCYmKHNbZV09dCxzW2VdLm1ldGFzPXUpLGgubGVuZ3RoPjAmJihhW2VdPW8uY2xvbmUobiksYVtlXS5tZXRhcz1oKX1lbHNlIHNbZV09dH0pKSx0aGlzLnN5bmNEaWZmKHIse2pvaW5zOnMsbGVhdmVzOmF9LG4saSl9fSx7a2V5Olwic3luY0RpZmZcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixvKXt2YXIgcj10LmpvaW5zLHM9dC5sZWF2ZXMsYT10aGlzLmNsb25lKGUpO3JldHVybiBufHwobj1mdW5jdGlvbigpe30pLG98fChvPWZ1bmN0aW9uKCl7fSksdGhpcy5tYXAociwoZnVuY3Rpb24oZSx0KXt2YXIgbz1hW2VdO2lmKGFbZV09dCxvKXt2YXIgcixzPWFbZV0ubWV0YXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5waHhfcmVmfSkpLGM9by5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBzLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpOyhyPWFbZV0ubWV0YXMpLnVuc2hpZnQuYXBwbHkocixpKGMpKX1uKGUsbyx0KX0pKSx0aGlzLm1hcChzLChmdW5jdGlvbihlLHQpe3ZhciBuPWFbZV07aWYobil7dmFyIGk9dC5tZXRhcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBoeF9yZWZ9KSk7bi5tZXRhcz1uLm1ldGFzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuaW5kZXhPZihlLnBoeF9yZWYpPDB9KSksbyhlLG4sdCksMD09PW4ubWV0YXMubGVuZ3RoJiZkZWxldGUgYVtlXX19KSksYX19LHtrZXk6XCJsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdH0pLHRoaXMubWFwKGUsKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQoZSxuKX0pKX19LHtrZXk6XCJtYXBcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5tYXAoKGZ1bmN0aW9uKG4pe3JldHVybiB0KG4sZVtuXSl9KSl9fSx7a2V5OlwiY2xvbmVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSl9fV0pLGV9KCksSj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXtjKHRoaXMsZSksdGhpcy5jYWxsYmFjaz10LHRoaXMudGltZXJDYWxjPW4sdGhpcy50aW1lcj1udWxsLHRoaXMudHJpZXM9MH1yZXR1cm4gaChlLFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJpZXM9MCxjbGVhclRpbWVvdXQodGhpcy50aW1lcil9fSx7a2V5Olwic2NoZWR1bGVUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS50cmllcz1lLnRyaWVzKzEsZS5jYWxsYmFjaygpfSksdGhpcy50aW1lckNhbGModGhpcy50cmllcysxKSl9fV0pLGV9KCl9XSl9KSk7Il0sInNvdXJjZVJvb3QiOiIifQ==